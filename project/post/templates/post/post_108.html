<!DOCTYPE html> <!--페이지 1-->
{% load static %}
<html>
<head>
    <meta charset="utf-8" />    
    <link rel="stylesheet" type="text/css" href="{% static "css/main/post_108.css" %}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        @font-face {
            font-family: 'GamtanRoadBatang';
            src: url("{% static 'font/GamtanRoad_Batang_TTF/batang_Regular.ttf' %}") format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'GamtanRoadBatang';
            src: url("{% static 'font/GamtanRoad_Batang_TTF/batang_Bold.ttf' %}") format('truetype');
            font-weight: bold;
            font-style: normal;
        }

        @font-face {
            font-family: 'GamtanRoadBatang';
            src: url("{% static 'font/GamtanRoad_Batang_TTF/batang_Thin.ttf' %}") format('truetype');
            font-weight: 100;
            font-style: normal;
        }
        @font-face {
            font-family: 'GamtanRoadDotum';
            src: url("{% static 'font/GamtanRoad_Dotum_TTF/Dotum_Regular.ttf' %}") format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'GamtanRoadDotum';
            src: url("{% static 'font/GamtanRoad_Dotum_TTF/Dotum_Bold.ttf' %}") format('truetype');
            font-weight: bold;
            font-style: normal;
        }

        @font-face {
            font-family: 'GamtanRoadDotum';
            src: url("{% static 'font/GamtanRoad_Dotum_TTF/Dotum_Thin.ttf' %}") format('truetype');
            font-weight: 100;
            font-style: normal;
        }
        @font-face {
            font-family: 'GamtanRoadGamtan';
            src: url("{% static 'font/GamtanRoad_Gamtan_TTF/gamtan.ttf' %}") format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'GamtanRoadTantan';
            src: url("{% static 'font/GamtanRoad_Tantan_TTF/tantan.ttf' %}") format('truetype');
            font-weight: normal;
            font-style: normal;
        }

    </style>
    <title>번뇌 다스리기</title>

</head>

    <body>
        <div class = "screen">
            <div class = "topnav">
                <a href="{% url "main:mainpage" %}">
                    <div class = "onjung">온정</div>
                </a>
            </div> <!--topnav 닫는 태그-->

        <div class="flowerandtext">
            <div class ="flower" id ="flower">
                <img src="https://ifh.cc/g/3TZ46x.png">
                <p><strong>수행에 앞서, 현재 머리속에 있는 번뇌들을 털어내듯 적어주세요.</strong></p>
                <img src="https://ifh.cc/g/3TZ46x.png">
            </div>

            <div class="orangetext"> 추후 수행을 통해 끊어내고자 하는 번뇌들을 간단하게 작성해 주세요. </div>

        {% comment %} <div class="nemobox"> <!--아무런 기능 없음 그냥 투명한 네모박스-->
            <div>
                <div id="name"> <span>ㅣ</span>번뇌명 </div>
                <div class="warning">10글자 이내로 작성해주세요.</div>
            </div> {% endcomment %}

            <div class="nemobox">
            <form id="myform" action="{% url "post:post_108" %}" method="POST">
                <div>
                    <div id="name1"> <span>ㅣ</span>번뇌명 </div>
                {% comment %} <div class="warning" id="warning">10글자 이내로 작성해주세요.</div> {% endcomment %}
                    <input type="text" id="inputField" name="title" placeholder="10글자 이내로 번뇌를 정의하여 작성해주세요.">
                </div>
                
                <div>
                    <div id="name2" > <span>ㅣ</span>번뇌 작성하기 </div>
                    <textarea id="textareaField" name="text" placeholder="마음 속 복잡한 번뇌들을 자유롭게 작성해주세요."></textarea>
                </div>
                
                <div class="buttons">

                    <button type="submit" >
                        <p>제출하기</p>
                    </button>
            

                </div>
            </form>
        </div> <!--nemobox 닫는 태그-->


            

        </div> <!--nemobox 닫는 태그-->


        </div> <!--screen 닫는 태그-->
    
        <script>
                        document.addEventListener('DOMContentLoaded', () => {
                            const textElement = document.getElementById('text');
                            const warningElement = document.querySelector("#hidden")
                            ;
                        
                            if (textElement.textContent.length > 10) {
                                warningElement.classList.remove('.warning');
                            }
                        });

                        // script.js
            document.addEventListener('DOMContentLoaded', () => {
                const inputField = document.getElementById('inputField');
                const warningElement = document.getElementById('warning');

                // 초기 상태에서 경고 메시지를 숨깁니다.
                warningElement.classList.add('hidden');

                inputField.addEventListener('input', () => {
                    if (inputField.value.length > 10) {
                        warningElement.classList.remove('hidden');
                    } else {
                        warningElement.classList.add('hidden');
                    }
                });
            });

            // script.js
            document.addEventListener('DOMContentLoaded', () => {
                const inputField = document.getElementById('inputField');
                const warningElement = document.getElementById('warning');
                const form = document.getElementById('myForm');

                inputField.addEventListener('input', () => {
                    if (inputField.value.length > 10) {
                        warningElement.classList.remove('hidden');
                    } else {
                        warningElement.classList.add('hidden');
                    }
                });

                form.addEventListener('submit', (event) => {
                    if (inputField.value.length > 10) {
                        event.preventDefault(); // 폼 제출을 막습니다.
                        alert("10글자 이내로 작성해주세요."); // 경고 메시지를 표시합니다.
                    }
                });
            });
            let backgroundAudio;

            // 페이지가 언로드되기 전에 오디오 상태를 저장합니다.
            window.addEventListener('beforeunload', () => {
                if (backgroundAudio) {
                    localStorage.setItem('audioCurrentTime', backgroundAudio.currentTime);
                    localStorage.setItem('isAudioPlaying', !backgroundAudio.paused);
                }
            });
            
            // 페이지 로드 시 오디오 객체를 생성하고 상태를 복원합니다.
            document.addEventListener('DOMContentLoaded', () => {
                backgroundAudio = new Audio("/static/images/mainpage_img/perfectbgm.mp3"); // 적절한 경로로 수정하세요.
                backgroundAudio.loop = true;
            
                const toggleButton = document.querySelector('.img-bgm');
            
                // 로컬 스토리지에서 저장된 재생 시간을 가져와 설정합니다.
                const audioCurrentTime = localStorage.getItem('audioCurrentTime');
                if (audioCurrentTime) {
                    backgroundAudio.currentTime = parseFloat(audioCurrentTime);
                }
            
                // 로컬 스토리지에서 가져온 상태에 따라 오디오를 재생 또는 정지합니다.
                const isAudioPlaying = localStorage.getItem('isAudioPlaying') === 'true';
                if (isAudioPlaying) {
                    backgroundAudio.play();
                    toggleButton.src = "/static/images/mainpage_img/Frame 159.png"; // 브금이 재생될 때의 이미지
                } else {
                    toggleButton.src = "/static/images/mainpage_img/img-bgm.png"; // 브금이 정지될 때의 이미지
                }
            
                // 클릭 이벤트를 추가하여 오디오 재생 및 정지 기능을 구현합니다.
                toggleButton.addEventListener('click', () => {
                    if (backgroundAudio.paused) {
                        backgroundAudio.play();
                        toggleButton.src = "/static/images/mainpage_img/Frame 159.png"; // 브금이 재생될 때의 이미지
                        localStorage.setItem('isAudioPlaying', 'true'); // 오디오 상태를 로컬 스토리지에 저장합니다.
                    } else {
                        backgroundAudio.pause();
                        toggleButton.src = "/static/images/mainpage_img/img-bgm.png"; // 브금이 정지될 때의 이미지
                        localStorage.setItem('isAudioPlaying', 'false'); // 오디오 상태를 로컬 스토리지에 저장합니다.
                    }
                });
            });


        </script>
    </body>



</html>